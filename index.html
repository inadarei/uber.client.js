<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.9">
<title>Node.js Client for UBER Hypermedia Type</title>
<link rel="stylesheet" href="css/asciidoc.css" type="text/css">


<link rel="stylesheet" href="css/uber-custom.css" type="text/css">
<script type="text/javascript" src="js/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Node.js Client for UBER Hypermedia Type</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_project_status">1. Project Status</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image">
<a class="image" href="https://travis-ci.org/inadarei/uber.client.js">
<img src="https://travis-ci.org/inadarei/uber.client.js.svg?branch=master" alt="build status">
</a>
</span> &nbsp;
<span class="image">
<a class="image" href="https://coveralls.io/r/inadarei/uber.client.js">
<img src="https://coveralls.io/repos/inadarei/uber.client.js/badge.png" alt="test coverage">
</a>
</span> &nbsp;
<span class="image">
<a class="image" href="https://codeclimate.com/github/inadarei/uber.client.js">
<img src="https://codeclimate.com/github/inadarei/uber.client.js/badges/gpa.svg" alt="code climate">
</a>
</span> &nbsp;
<span class="image">
<a class="image" href="https://www.npmjs.org/package/uberclient">
<img src="https://img.shields.io/npm/v/uberclient.svg" alt="npm version">
</a>
</span></p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Author
</dt>
<dd>
<p>
  Irakli Nadareishvili
</p>
</dd>
<dt class="hdlist1">
Status
</dt>
<dd>
<p>
  <strong><span class="white red-background">Early, incomplete alpha</span></strong>
</p>
</dd>
<dt class="hdlist1">
Limitations
</dt>
<dd>
<p>
  Doesn&#8217;t handle documents with circular references.
</p>
</dd>
<dt class="hdlist1">
Github source of the client code
</dt>
<dd>
<p>
  <a href="https://github.com/inadarei/uber.client.js">https://github.com/inadarei/uber.client.js</a>
</p>
</dd>
<dt class="hdlist1">
Github source of this documentation
</dt>
<dd>
<p>
  <a href="https://github.com/inadarei/uber.client.js/tree/gh-pages">https://github.com/inadarei/uber.client.js/tree/gh-pages</a>
</p>
</dd>
<dt class="hdlist1">
Documentation Last Updated
</dt>
<dd>
<p>
  2015-01-03
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_general">2. General</h2>
<div class="sectionbody">
<div class="paragraph"><p>Node.js client is an implementation of an SDK-level client for the <a href="http://uberhypermedia.org">UBER hypermedia message format</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_design_goals">3. Design Goals</h2>
<div class="sectionbody">
<div class="paragraph"><p>Minimal, robust, extensible</p></div>
<div class="listingblock">
<div class="title">Example1:</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> client <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">require</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'uberclient'</span><span style="color: #990000">)</span>
  <span style="color: #990000">,</span> token  <span style="color: #990000">=</span> <span style="color: #FF0000">'1234567890'</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// You'd normally get this from a separate OAuth2 workflow</span></span>

client<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">authProvider</span></span><span style="color: #990000">(</span>client<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">authProviderTokenBased</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">'token'</span> <span style="color: #990000">:</span> token<span style="color: #FF0000">}</span><span style="color: #990000">));</span>

client<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">request</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'http://api.froyo.io'</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="color: #990000">(</span>error<span style="color: #990000">,</span> msg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>error<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> names <span style="color: #990000">=</span> msg<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">query</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"rel"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"urn:froyo_io:query:names"</span><span style="color: #FF0000">}</span><span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">submit</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"m"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"male"</span><span style="color: #FF0000">}</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">,</span> <span style="color: #FF0000">"read"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"xml"</span><span style="color: #990000">);</span></tt></pre></div></div>
<div class="listingblock">
<div class="title">Example2:</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> url <span style="color: #990000">=</span> <span style="color: #FF0000">'https://raw.githubusercontent.com/inadarei/uber.client.js/master/test/fixtures/uber-sample.json'</span><span style="color: #990000">;</span>
    client<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">request</span></span><span style="color: #990000">(</span>url<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>error<span style="color: #990000">,</span> uberMsg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>err<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> appendPerson <span style="color: #990000">=</span> uberMsg<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">query</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"id"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"people"</span><span style="color: #FF0000">}</span><span style="color: #990000">)</span>
                          <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">query</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"rel"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"http://example.org/rels/create"</span><span style="color: #FF0000">}</span><span style="color: #990000">)</span>
                          <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">submit</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"g"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"irakli"</span><span style="color: #990000">,</span>
                                   <span style="color: #FF0000">"f"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"nadareishvili"</span><span style="color: #990000">,</span>
                                   <span style="color: #FF0000">"e"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"irakli@example.com"</span><span style="color: #FF0000">}</span><span style="color: #990000">);</span>
                                   <span style="font-style: italic"><span style="color: #9A1900">// Warning: .submit() implementation is in progress.</span></span>
      <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span><span style="color: #990000">);</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_api_documentation">4. API Documentation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_module_uberclient">4.1. Module: uberclient</h3>
<div class="sect3">
<h4 id="_methods">4.1.1. Methods</h4>
<div class="dlist"><dl>
<dt class="hdlist1">
request(url, callback [,action])
</dt>
<dd>
<p>
  make a request
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">url</span>
</dt>
<dd>
<p>
    a properly-formatted URL string
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">callback(error, message)</span>
</dt>
<dd>
<p>
    callback function which accepts error and message parameters
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">action</span>
</dt>
<dd>
<p>
    Is one of the actions defined by <a href="http://uberhypermedia">UBER spec</a>. Defaults to <em>read</em> which would correspond to GET for HTTP.
</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
authProvider(providerFunction)
</dt>
<dd>
<p>
  sets the authorization provider that will be used henceforth. Provider function accepts <span class="monospaced">options</span> javascript object used
  for configuring specific type of a provider. UberClient pre-defines two types of providers (HTTP OAuth2-compatible,
  bearer token-based and HTTP URL query-param based). Any provider function can be passed to extend this functionality. THe
  implementing function must expose preprocessRequest(request) function that will be called before a request is fired.
</p>
</dd>
<dt class="hdlist1">
authProviderTokenBased({"token" : "&#8230;", "header-field" : "&#8230;"})
</dt>
<dd>
<p>
   OAuth-2 compatible. <span class="monospaced">header-field</span> defaults to <span class="monospaced">Bearer</span> resulting in an HTTP request header field of the form: <span class="monospaced">Authorization: Bearer xxxxxxxxxxxxxx</span>
</p>
</dd>
<dt class="hdlist1">
authProviderApikeyBased({"apikey" : "&#8230;", "query-field" : "&#8230;"})
</dt>
<dd>
<p>
   API Key compatible. <span class="monospaced">query-field</span> defaults to <span class="monospaced">key</span> resulting in an HTTP request query field of the form: <span class="monospaced">?key=xxxx</span> or <span class="monospaced">&amp;key=xxxx</span>
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_module_message">4.2. Module: message</h3>
<div class="sect3">
<h4 id="_methods_2">4.2.1. Methods</h4>
<div class="dlist"><dl>
<dt class="hdlist1">
new(message, callback)
</dt>
<dd>
<p>
  Mints a new message using a properly-formatted UBER message serialized in XML or JSON.
  Callback accepts:
</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">err</span> to indicate cases when aan error may occur
</p>
</li>
<li>
<p>
<span class="monospaced">uberMessage</span> the fully-minted <a href="#anchorMessage">Message</a> object
</p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_a_id_anchormessage_a_class_message">4.3. <a id="anchorMessage"></a>Class: Message</h3>
<div class="sect3">
<h4 id="_properties">4.3.1. Properties</h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">version</span>
</dt>
<dd>
<p>
  returns the version of the UBER format used in this message. Read-only.
</p>
</dd>
<dt class="hdlist1">
+rawMessage
</dt>
<dd>
<p>
  returns the raw representation of the message the object was initialized with. Read-only.
</p>
</dd>
<dt class="hdlist1">
query(selector [, context])
</dt>
<dd>
<p>
  @See: the identical method for the Data class.
</p>
</dd>
<dt class="hdlist1">
data()
</dt>
<dd>
<p>
  returns an array of <span class="monospaced">Data</span> elements
</p>
</dd>
<dt class="hdlist1">
error()
</dt>
<dd>
<p>
  returns an array of <span class="monospaced">Data</span> elements
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_class_dataarray">4.4. Class: DataArray</h3>
<div class="sect3">
<h4 id="_methods_3">4.4.1. Methods</h4>
<div class="dlist"><dl>
<dt class="hdlist1">
query(selector [, context])
</dt>
<dd>
<p>
  @See: the identical method for the Data class.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_class_data">4.5. Class: Data</h3>
<div class="sect3">
<h4 id="_properties_2">4.5.1. Properties</h4>
</div>
<div class="sect3">
<h4 id="_methods_4">4.5.2. Methods</h4>
<div class="dlist"><dl>
<dt class="hdlist1">
query(selector [, context])
</dt>
<dd>
<p>
returns a new Data element containing child Data elements found in the context Data object, filtered based on passed argument(s).
Inpsired by <a href="http://api.jquery.com/jQuery/">jQuery()</a>
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">selector</span>
</dt>
<dd>
<p>
      is a JSON object, value of which is a string or a regular expression. Please note: numbers are compared as strings
      and variable type is ignored.
      The key is one of the following options:
     <br>
</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">id</span> matches by ID
</p>
</li>
<li>
<p>
<span class="monospaced">name</span> matches by name
</p>
</li>
<li>
<p>
<span class="monospaced">rel</span> matches by any of the rels.
</p>
</li>
<li>
<p>
<span class="monospaced">value</span> matches by value property
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">A special case of <span class="monospaced">{"*" : "*"}</span> stands for: "match any elements" (Not yet implemented)</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> locationdata <span style="color: #990000">=</span> data<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">query</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"rel"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"loc+*"</span><span style="color: #FF0000">}</span><span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">query</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span><span style="color: #FF0000">"name"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"eiffel"</span><span style="color: #FF0000">}</span><span style="color: #990000">);</span></tt></pre></div></div>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">context</span>
</dt>
<dd>
<p>
      can have one of two values:
</p>
<div class="ulist"><ul>
<li>
<p>
<em>children</em> (default)
</p>
</li>
<li>
<p>
<em>first-child</em>
</p>
</li>
<li>
<p>
<em>last-child</em>
</p>
</li>
<li>
<p>
<em>depth-n</em> where n is a number 1-10 (infinite depth is prohibited)
</p>
</li>
</ul></div>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
follow(callback)
</dt>
<dd>
<p>
follow a URL in the data element if the field is defined. Callback accepts <span class="monospaced">error</span> and <span class="monospaced">message</span> params.
</p>
</dd>
<dt class="hdlist1">
submit(callback)
</dt>
<dd>
<p>
construct a templated request if URL and Model are defined and submit data. Callback accepts <span class="monospaced">error</span> and <span class="monospaced">message</span> params.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_class_linkrelation_tbd">4.6. Class: LinkRelation [TBD]</h3>
<div class="sect3">
<h4 id="_properties_3">4.6.1. Properties</h4>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
name
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_methods_5">4.6.2. Methods</h4>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
isURL() - is link relation name a proper URL?
</p>
</li>
<li>
<p>
resolve() - resolve the link relation, if it is a proper URL
</p>
</li>
</ol></div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-01-03 00:45:50 EST
</div>
</div>
</body>
</html>
